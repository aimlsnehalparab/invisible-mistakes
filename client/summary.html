<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Executive Risk Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#020617;
  --card:rgba(255,255,255,0.06);
  --border:rgba(255,255,255,0.12);
  --text:#e5e7eb;
  --muted:#9ca3af;
  --low:#22c55e;
  --med:#f59e0b;
  --high:#ef4444;
  --blue:#4f7cff;
}

*{box-sizing:border-box;font-family:Segoe UI,system-ui;}

body{
  margin:0;
  background:radial-gradient(circle at top,#111827,var(--bg));
  color:var(--text);
}

.container{
  max-width:1200px;
  margin:30px auto;
  padding:20px;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:25px;
}

.header h1{margin:0;font-size:26px;}
.header span{color:var(--muted);}

.kpis{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:20px;
  margin-bottom:30px;
}

.kpi{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:20px;
}

.kpi h3{
  margin:0;
  font-size:13px;
  color:var(--muted);
}

.kpi .value{
  font-size:34px;
  font-weight:700;
  margin-top:8px;
}

.low{color:var(--low);}
.medium{color:var(--med);}
.high{color:var(--high);}

.grid{
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:25px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:22px;
}

.card h3{
  margin-top:0;
  font-size:16px;
}

.chart-box{height:280px;}

.insight{
  margin-top:15px;
  font-size:14px;
  color:var(--muted);
}

.list li{margin-bottom:8px;}

.footer{
  text-align:center;
  margin-top:35px;
}

.btn{
  padding:14px 34px;
  border-radius:14px;
  border:none;
  background:var(--blue);
  color:#fff;
  cursor:pointer;
  font-size:15px;
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <h1>Executive Behavioral Risk Dashboard</h1>
    <span>User Awareness Overview</span>
  </div>

  <!-- KPI ROW -->
  <div class="kpis">
    <div class="kpi">
      <h3>Overall Risk Score</h3>
      <div id="score" class="value">0</div>
    </div>

    <div class="kpi">
      <h3>Risk Level</h3>
      <div id="level" class="value low">Low</div>
    </div>

    <div class="kpi">
      <h3>Risky Actions</h3>
      <div id="count" class="value">0</div>
    </div>

    <div class="kpi">
      <h3>Top Risk Behavior</h3>
      <div id="topRisk" class="value">â€”</div>
    </div>
  </div>

  <!-- MAIN GRID -->
  <div class="grid">

    <div class="card">
      <h3>Risk Contribution by Behavior</h3>
      <div class="chart-box">
        <canvas id="barChart"></canvas>
      </div>
      <div class="insight">
        This chart highlights which user behaviors contributed most to the overall risk score.
      </div>
    </div>

    <div class="card">
      <h3>Behavioral Risk Distribution</h3>
      <div class="chart-box">
        <canvas id="pieChart"></canvas>
      </div>
      <div class="insight">
        Distribution of risk across different behavioral patterns.
      </div>
    </div>

  </div>

  <div class="card" style="margin-top:25px;">
    <h3>Recommended Executive Actions</h3>
    <ul class="list">
      <li>Focus awareness training on urgency-based decision making</li>
      <li>Educate users on social engineering techniques</li>
      <li>Limit default tracking and persistent sessions</li>
      <li>Encourage verification over convenience</li>
    </ul>
  </div>

  <div class="footer">
    <button class="btn" onclick="restart()">Restart Simulation</button>
  </div>

</div>

<script>
const actions = JSON.parse(sessionStorage.getItem("actions")) || [];

const weights = {
  clicked_short_link:20,
  allowed_location:20,
  uploaded_file:15,
  persistent_session:25,
  accepted_all_cookies:15,
  clicked_urgency_warning:20,
  downloaded_free_file:20,
  trusted_social_proof:15,
  saved_payment_info:30
};

let score = 0;
let topAction = null;
let topValue = 0;

actions.forEach(a=>{
  score += weights[a] || 0;
  if((weights[a]||0) > topValue){
    topValue = weights[a];
    topAction = a;
  }
});

if(score>100) score=100;

document.getElementById("score").innerText = score;
document.getElementById("count").innerText = actions.length;

let level = "Low";
let levelClass = "low";
if(score>70){level="High";levelClass="high";}
else if(score>40){level="Medium";levelClass="medium";}

const levelEl = document.getElementById("level");
levelEl.innerText = level;
levelEl.className = "value "+levelClass;

document.getElementById("topRisk").innerText =
  topAction ? topAction.replace(/_/g," ") : "None";

const labels = actions.map(a=>a.replace(/_/g," "));
const data = actions.map(a=>weights[a]);

const commonOpts = {responsive:true,maintainAspectRatio:false};

new Chart(barChart,{
  type:"bar",
  data:{labels,datasets:[{data}]},
  options:commonOpts
});

new Chart(pieChart,{
  type:"pie",
  data:{labels,datasets:[{data}]},
  options:commonOpts
});

function restart(){
  sessionStorage.clear();
  window.location.href="index.html";
}
</script>

</body>
</html>
